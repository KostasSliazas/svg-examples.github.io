"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}!function(w,d){var CreateUI=function(){function CreateUI(container){_classCallCheck(this,CreateUI),this.tim=0,this.imagesContainersArray=[],this.imagesArray=[],this.container=container,this.indexOfImage=0,this.isActive=!1,this.isAutoplayOn=!1,this.frag=d.createDocumentFragment(),this.imag=d.createElement("div"),this.cent=d.createElement("div"),this.left=d.createElement("div"),this.rigt=d.createElement("div"),this.clos=d.createElement("div"),this.foot=d.createElement("div"),this.alts=d.createElement("div"),this.play=d.createElement("div"),this.down=d.createElement("div"),this.onow=d.createElement("div"),this.imgs=d.createElement("img"),this.fine=d.createElement("div"),this.wdow=d.createElement("div"),this.ilef=d.createElement("div"),this.irig=d.createElement("div"),this.imgs.src="data:,",this.imgs.setAttribute("alt",""),this.imag.appendChild(this.clos),this.imag.appendChild(this.cent).appendChild(this.imgs),this.cent.appendChild(this.rigt).appendChild(this.irig),this.cent.appendChild(this.left).appendChild(this.ilef),this.imag.appendChild(this.foot).appendChild(this.play),this.imag.appendChild(this.onow).appendChild(this.wdow).appendChild(this.down),this.onow.appendChild(this.alts),this.foot.appendChild(this.fine),this.frag.appendChild(this.imag),this.alts.id="alts",this.foot.id="foot",this.clos.id="clos",this.rigt.id="rigt",this.left.id="left",this.play.id="play",this.onow.id="onow",this.down.id="down",this.cent.id="cent",this.imag.id="imag",this.wdow.id="wdow",this.irig.id="irig",this.ilef.id="ilef",this.imag.className="visi hide",d.body.appendChild(this.frag)}return _createClass(CreateUI,[{key:"autoPlay",value:function autoPlay(){var that=this,delay;(that.indexOfImage===that.imagesArray.length-1&&(that.indexOfImage=-1),this.isAutoplayOn)?(this.clear(),this.isActive=!0):(this.isAutoplayOn=!0,this.play.className+=" acts",function delay(){that.right(),that.show(),that.tim=setTimeout((function(){clearTimeout(that.tim),that.tim=0,that.indexOfImage<that.imagesArray.length-1&&delay()}),1e3),that.indexOfImage===that.imagesArray.length-1&&that.clear()}())}},{key:"clear",value:function clear(){clearTimeout(this.tim),this.tim=0,this.play.className="play",this.isActive=!1,this.isAutoplayOn=!1}},{key:"downloads",value:function downloads(){var a=d.createElement("a");a.setAttribute("rel","noopener noreferrer"),a.target="_blank",a.href=this.imagesArray[this.indexOfImage].src,a.download=this.imagesArray[this.indexOfImage].src.split("/").pop(),a.click(),a.remove(),this.onow.dataset.selected=this.imagesArray[this.indexOfImage].src}},{key:"lefts",value:function lefts(){0===this.indexOfImage&&(this.indexOfImage=this.imagesArray.length),this.indexOfImage>0&&this.indexOfImage--}},{key:"right",value:function right(){this.indexOfImage===this.imagesArray.length-1&&(this.indexOfImage=-1),this.indexOfImage<this.imagesArray.length-1&&this.indexOfImage++}},{key:"close",value:function close(){this.clear(),d.body.style.overflow="visible",this.imag.className+=" hide"}},{key:"show",value:function show(){this.isActive||(this.isActive=!0,this.imag.className="vis",w.setTimeout((function(){d.body.style.overflow="hide"}),110)),this.alts.innerText=this.imagesArray[this.indexOfImage].src.slice(this.imagesArray[this.indexOfImage].src.lastIndexOf("/")+1),this.fine.innerText=Number(this.indexOfImage+1)+"/"+this.imagesArray.length,this.imgs.src=this.imagesArray[this.indexOfImage].src}}]),CreateUI}();d.addEventListener("DOMContentLoaded",(function(){for(var cont=d.getElementsByClassName("images-container")[0]?d.getElementsByClassName("images-container"):[d.body],images=new CreateUI(cont),i=images.container.length-1;i>=0;i--)images.imagesContainersArray.push(images.container[i]);for(var _i=images.imagesContainersArray.length-1;_i>=0;_i--)for(var img=images.imagesContainersArray[_i].getElementsByTagName("img"),j=0;j<img.length;j++)images.imagesArray.push(img[j]);function listenForImages(e){e.preventDefault(),e.stopPropagation(),images.indexOfImage=images.imagesArray.indexOf(e.target)?images.imagesArray.indexOf(e.target):0,images.show()}function controls(e){switch(e.preventDefault(),e.stopPropagation(),e.target.id||e.target.tagName){case"rigt":images.clear(),images.right(),images.show();break;case"left":images.clear(),images.lefts(),images.show();break;case"play":images.autoPlay();break;case"wdow":if(images.imagesArray[images.indexOfImage].src===images.onow.dataset.selected)return;images.downloads();break;case"clos":images.close()}return!1}"BODY"===images.imagesContainersArray[0].tagName?(images.imagesArray.pop(),d.addEventListener("click",listenForImages)):images.imagesContainersArray.forEach((function(e){return e.addEventListener("click",listenForImages)})),images.imag.addEventListener("click",controls),w.addEventListener("keyup",(function(e){images.isActive&&!e.isComposing&&229!==e.key&&(e.preventDefault(),"ArrowLeft"===e.key&&(images.clear(),images.lefts(),images.show()),"ArrowRight"===e.key&&(images.clear(),images.right(),images.show()),"Escape"===e.key&&images.close()," "===e.key&&images.autoPlay())}))}))}(window,document);